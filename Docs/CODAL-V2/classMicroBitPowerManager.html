<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Microbit CODAL C++ Docs: MicroBitPowerManager Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Microbit CODAL C++ Docs<span id="projectnumber">&#160;1.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="classMicroBitPowerManager-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">MicroBitPowerManager Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="MicroBitPowerManager_8h_source.html">MicroBitPowerManager.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for MicroBitPowerManager:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classMicroBitPowerManager.png" alt=""/>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aba91f0f4823aaad83aa94339464e91e4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMicroBitPowerManager.html#aba91f0f4823aaad83aa94339464e91e4">MicroBitPowerManager</a> (<a class="el" href="classcodal_1_1MicroBitI2C.html">MicroBitI2C</a> &amp;i2c, <a class="el" href="classcodal_1_1MicroBitIO.html">MicroBitIO</a> &amp;ioPins, NRFLowLevelTimer &amp;systemTimer, uint16_t id=MICROBIT_ID_POWER_MANAGER)</td></tr>
<tr class="separator:aba91f0f4823aaad83aa94339464e91e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7958eea2b2ad8898d37f2e3279c8b786"><td class="memItemLeft" align="right" valign="top">MicroBitPowerSource&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMicroBitPowerManager.html#a7958eea2b2ad8898d37f2e3279c8b786">getPowerSource</a> ()</td></tr>
<tr class="separator:a7958eea2b2ad8898d37f2e3279c8b786"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ffb1c585fd98a03cc935f6861d57138"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMicroBitPowerManager.html#a6ffb1c585fd98a03cc935f6861d57138">getPowerConsumption</a> ()</td></tr>
<tr class="separator:a6ffb1c585fd98a03cc935f6861d57138"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5913b2350f3cf2d0d8c86ce4df70388f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structMicroBitVersion.html">MicroBitVersion</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMicroBitPowerManager.html#a5913b2350f3cf2d0d8c86ce4df70388f">getVersion</a> ()</td></tr>
<tr class="separator:a5913b2350f3cf2d0d8c86ce4df70388f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87cb9a395839397f324b82a150ed3bd9"><td class="memItemLeft" align="right" valign="top">MicroBitUSBStatus&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMicroBitPowerManager.html#a87cb9a395839397f324b82a150ed3bd9">getUSBStatus</a> ()</td></tr>
<tr class="separator:a87cb9a395839397f324b82a150ed3bd9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d0f7db040ab842c2ddaf0806f362865"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMicroBitPowerManager.html#a6d0f7db040ab842c2ddaf0806f362865">sendUIPMPacket</a> (ManagedBuffer packet)</td></tr>
<tr class="separator:a6d0f7db040ab842c2ddaf0806f362865"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a7344140cc846bcb7f87df77e102ea4"><td class="memItemLeft" align="right" valign="top">ManagedBuffer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMicroBitPowerManager.html#a9a7344140cc846bcb7f87df77e102ea4">recvUIPMPacket</a> ()</td></tr>
<tr class="separator:a9a7344140cc846bcb7f87df77e102ea4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0b0ad8eeae97d25e21334bf49f4391b"><td class="memItemLeft" align="right" valign="top">ManagedBuffer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMicroBitPowerManager.html#ab0b0ad8eeae97d25e21334bf49f4391b">awaitUIPMPacket</a> ()</td></tr>
<tr class="separator:ab0b0ad8eeae97d25e21334bf49f4391b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a352bfe73a68e030d8e20c2f3aef40dce"><td class="memItemLeft" align="right" valign="top">ManagedBuffer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMicroBitPowerManager.html#a352bfe73a68e030d8e20c2f3aef40dce">writeProperty</a> (ManagedBuffer request, bool ack=true)</td></tr>
<tr class="separator:a352bfe73a68e030d8e20c2f3aef40dce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5144990fe4446cd9cf84c347589aa30"><td class="memItemLeft" align="right" valign="top">ManagedBuffer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMicroBitPowerManager.html#ac5144990fe4446cd9cf84c347589aa30">readProperty</a> (int property)</td></tr>
<tr class="separator:ac5144990fe4446cd9cf84c347589aa30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c923688b0640fed1e698694fa99ce54"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMicroBitPowerManager.html#a4c923688b0640fed1e698694fa99ce54">nop</a> ()</td></tr>
<tr class="separator:a4c923688b0640fed1e698694fa99ce54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46da79f623174c038f6b8bd1877c90fc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMicroBitPowerManager.html#a46da79f623174c038f6b8bd1877c90fc">off</a> ()</td></tr>
<tr class="separator:a46da79f623174c038f6b8bd1877c90fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a011ffdc72a1fe3208bbce4e4a0e8d951"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMicroBitPowerManager.html#a011ffdc72a1fe3208bbce4e4a0e8d951">idleCallback</a> () override</td></tr>
<tr class="separator:a011ffdc72a1fe3208bbce4e4a0e8d951"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ad0a83dc5cdbc66c8ba0be83595a656"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMicroBitPowerManager.html#a5ad0a83dc5cdbc66c8ba0be83595a656">awaitingPacket</a> (bool awaiting)</td></tr>
<tr class="separator:a5ad0a83dc5cdbc66c8ba0be83595a656"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7631fcaed5a75822cc04c76090043ab"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMicroBitPowerManager.html#af7631fcaed5a75822cc04c76090043ab">~MicroBitPowerManager</a> ()</td></tr>
<tr class="separator:af7631fcaed5a75822cc04c76090043ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2eb4e624320c1b3c252863a2f3ed56a4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMicroBitPowerManager.html#a2eb4e624320c1b3c252863a2f3ed56a4">deepSleep</a> ()</td></tr>
<tr class="separator:a2eb4e624320c1b3c252863a2f3ed56a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ab7937e8790ba8b071bb749a439b887"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMicroBitPowerManager.html#a7ab7937e8790ba8b071bb749a439b887">deepSleep</a> (uint32_t milliSeconds)</td></tr>
<tr class="separator:a7ab7937e8790ba8b071bb749a439b887"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad885adf902acaf48702e8db1ff662c89"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMicroBitPowerManager.html#ad885adf902acaf48702e8db1ff662c89">deepSleepAsync</a> ()</td></tr>
<tr class="separator:ad885adf902acaf48702e8db1ff662c89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7dde03e71b6c1b4c7af947c63482f3a1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMicroBitPowerManager.html#a7dde03e71b6c1b4c7af947c63482f3a1">powerDownEnable</a> ()</td></tr>
<tr class="separator:a7dde03e71b6c1b4c7af947c63482f3a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a933eb99a07dfc5e9da41ed6f5c71adde"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMicroBitPowerManager.html#a933eb99a07dfc5e9da41ed6f5c71adde">powerDownDisable</a> ()</td></tr>
<tr class="separator:a933eb99a07dfc5e9da41ed6f5c71adde"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4061d7d8e2181565744921eaaa8b542c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMicroBitPowerManager.html#a4061d7d8e2181565744921eaaa8b542c">powerDownIsEnabled</a> ()</td></tr>
<tr class="separator:a4061d7d8e2181565744921eaaa8b542c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94d6d674babe6d6b526384aa14855ca4"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMicroBitPowerManager.html#a94d6d674babe6d6b526384aa14855ca4">waitingForDeepSleep</a> ()</td></tr>
<tr class="separator:a94d6d674babe6d6b526384aa14855ca4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7cffd953c8d8b3cdd76efc5208b18467"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMicroBitPowerManager.html#a7cffd953c8d8b3cdd76efc5208b18467">readyForDeepSleep</a> ()</td></tr>
<tr class="separator:a7cffd953c8d8b3cdd76efc5208b18467"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73d0286be4ba071fd531ab964b4953f6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMicroBitPowerManager.html#a73d0286be4ba071fd531ab964b4953f6">startDeepSleep</a> ()</td></tr>
<tr class="separator:a73d0286be4ba071fd531ab964b4953f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc552ef5b7acfb92f0cd5a8aeeeb66b4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMicroBitPowerManager.html#abc552ef5b7acfb92f0cd5a8aeeeb66b4">cancelDeepSleep</a> ()</td></tr>
<tr class="separator:abc552ef5b7acfb92f0cd5a8aeeeb66b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a65ac5e7315b59f959299c3e2c95a0a7e"><td class="memItemLeft" align="right" valign="top"><a id="a65ac5e7315b59f959299c3e2c95a0a7e" name="a65ac5e7315b59f959299c3e2c95a0a7e"></a>
<a class="el" href="structMicroBitVersion.html">MicroBitVersion</a>&#160;</td><td class="memItemRight" valign="bottom"><b>version</b></td></tr>
<tr class="separator:a65ac5e7315b59f959299c3e2c95a0a7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a2077f6a4b63b2e3e960be9b31e97a1"><td class="memItemLeft" align="right" valign="top"><a id="a3a2077f6a4b63b2e3e960be9b31e97a1" name="a3a2077f6a4b63b2e3e960be9b31e97a1"></a>
MicroBitPowerSource&#160;</td><td class="memItemRight" valign="bottom"><b>powerSource</b></td></tr>
<tr class="separator:a3a2077f6a4b63b2e3e960be9b31e97a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7d3c7ab754a7b057132f89a0b4b0e52"><td class="memItemLeft" align="right" valign="top"><a id="af7d3c7ab754a7b057132f89a0b4b0e52" name="af7d3c7ab754a7b057132f89a0b4b0e52"></a>
uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>powerConsumption</b></td></tr>
<tr class="separator:af7d3c7ab754a7b057132f89a0b4b0e52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5d573921264084d35b06de645493032"><td class="memItemLeft" align="right" valign="top"><a id="ab5d573921264084d35b06de645493032" name="ab5d573921264084d35b06de645493032"></a>
MicroBitUSBStatus&#160;</td><td class="memItemRight" valign="bottom"><b>usbStatus</b></td></tr>
<tr class="separator:ab5d573921264084d35b06de645493032"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e96c7b526767090570b0115eb02066e"><td class="memItemLeft" align="right" valign="top"><a id="a6e96c7b526767090570b0115eb02066e" name="a6e96c7b526767090570b0115eb02066e"></a>
<a class="el" href="classcodal_1_1MicroBitI2C.html">MicroBitI2C</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>i2cBus</b></td></tr>
<tr class="separator:a6e96c7b526767090570b0115eb02066e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa333057057de4a58ecc000a707df8a7"><td class="memItemLeft" align="right" valign="top"><a id="afa333057057de4a58ecc000a707df8a7" name="afa333057057de4a58ecc000a707df8a7"></a>
<a class="el" href="classcodal_1_1MicroBitIO.html">MicroBitIO</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>io</b></td></tr>
<tr class="separator:afa333057057de4a58ecc000a707df8a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3a0759b7cb949715f2e3edd91c49269"><td class="memItemLeft" align="right" valign="top"><a id="ae3a0759b7cb949715f2e3edd91c49269" name="ae3a0759b7cb949715f2e3edd91c49269"></a>
NRFLowLevelTimer *&#160;</td><td class="memItemRight" valign="bottom"><b>sysTimer</b></td></tr>
<tr class="separator:ae3a0759b7cb949715f2e3edd91c49269"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Class definition for <a class="el" href="classMicroBitPowerManager.html">MicroBitPowerManager</a>. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="aba91f0f4823aaad83aa94339464e91e4" name="aba91f0f4823aaad83aa94339464e91e4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba91f0f4823aaad83aa94339464e91e4">&#9670;&nbsp;</a></span>MicroBitPowerManager()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MicroBitPowerManager::MicroBitPowerManager </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcodal_1_1MicroBitI2C.html">MicroBitI2C</a> &amp;&#160;</td>
          <td class="paramname"><em>i2c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classcodal_1_1MicroBitIO.html">MicroBitIO</a> &amp;&#160;</td>
          <td class="paramname"><em>ioPins</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">NRFLowLevelTimer &amp;&#160;</td>
          <td class="paramname"><em>systemTimer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>id</em> = <code>MICROBIT_ID_POWER_MANAGER</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Constructor. Create a software abstraction of a power manager.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">i2c</td><td>the I2C bus to use to communicate with the micro:bit USB interface chip </td></tr>
    <tr><td class="paramname">ioPins</td><td>the IO pins in use on this device. </td></tr>
    <tr><td class="paramname">id</td><td>the unique EventModel id of this component. Defaults to: MICROBIT_ID_POWER_MANAGER </td></tr>
    <tr><td class="paramname">systemTimer</td><td>the system timer. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af7631fcaed5a75822cc04c76090043ab" name="af7631fcaed5a75822cc04c76090043ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7631fcaed5a75822cc04c76090043ab">&#9670;&nbsp;</a></span>~MicroBitPowerManager()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MicroBitPowerManager::~MicroBitPowerManager </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Destructor. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a5ad0a83dc5cdbc66c8ba0be83595a656" name="a5ad0a83dc5cdbc66c8ba0be83595a656"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ad0a83dc5cdbc66c8ba0be83595a656">&#9670;&nbsp;</a></span>awaitingPacket()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MicroBitPowerManager::awaitingPacket </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>awaiting</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Allows a subsystem to indicate that it is actively waiting for a I2C response from the KL27 (e.g. the USBFlashManager). If set, the PowerManager will defer polling of the KL27 control interface if an interrupt is asserted.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">awaiting</td><td>true if a subsystem is awaiting a packet from the KL27, false otherwise. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab0b0ad8eeae97d25e21334bf49f4391b" name="ab0b0ad8eeae97d25e21334bf49f4391b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab0b0ad8eeae97d25e21334bf49f4391b">&#9670;&nbsp;</a></span>awaitUIPMPacket()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ManagedBuffer MicroBitPowerManager::awaitUIPMPacket </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Awaits a response to a previous requests to the USB interface chip. Up to MICROBIT_UIPM_MAX_RETRIES attempts will be made at ~1ms intervals.</p>
<dl class="section return"><dt>Returns</dt><dd>A buffer containing the complete response. </dd></dl>

</div>
</div>
<a id="abc552ef5b7acfb92f0cd5a8aeeeb66b4" name="abc552ef5b7acfb92f0cd5a8aeeeb66b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc552ef5b7acfb92f0cd5a8aeeeb66b4">&#9670;&nbsp;</a></span>cancelDeepSleep()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MicroBitPowerManager::cancelDeepSleep </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >For library use. Cancel previosly requested deep sleep.</p>
<p >Cancel previously requested deep sleep </p>

</div>
</div>
<a id="a2eb4e624320c1b3c252863a2f3ed56a4" name="a2eb4e624320c1b3c252863a2f3ed56a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2eb4e624320c1b3c252863a2f3ed56a4">&#9670;&nbsp;</a></span>deepSleep() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MicroBitPowerManager::deepSleep </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Powers down the CPU and USB interface and instructs peripherals to enter an inoperative low power state. However, all program state is preserved. CPU will deepsleep for the given period of time, before returning to normal operation.</p>
<p >note: ALL peripherals will be shutdown in this period. If you wish to keep peripherals active, simply use uBit.sleep();</p>
<p >The current fiber is blocked immediately. Power down occurs when the scheduler is next idle, unless cancelled by wake up events before then.</p>
<p >Wake up is triggered at the next Timer event created with the CODAL_TIMER_EVENT_FLAGS_WAKEUP flag or by externally configured sources, for example, pin-&gt;wakeOnActive(true).</p>
<p >Powers down the CPU and USB interface and instructs peripherals to enter an inoperative low power state. However, all program state is preserved. CPU will deepsleep for the given period of time, before returning to normal operation.</p>
<p >note: ALL peripherals will be shutdown in this period. If you wish to keep peripherals active, simply use uBit.sleep();</p>
<p >The current fiber is blocked immediately. Sleep occurs when the scheduler is next idle.</p>
<p >Wake up is triggered at the next Timer event created with the CODAL_TIMER_EVENT_FLAGS_WAKEUP flag or by externally configured sources, for example, pin-&gt;wakeOnActive(true). </p>

</div>
</div>
<a id="a7ab7937e8790ba8b071bb749a439b887" name="a7ab7937e8790ba8b071bb749a439b887"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ab7937e8790ba8b071bb749a439b887">&#9670;&nbsp;</a></span>deepSleep() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MicroBitPowerManager::deepSleep </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>milliSeconds</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Powers down the CPU and USB interface and instructs peripherals to enter an inoperative low power state. However, all program state is preserved. CPU will deepsleep for the given period of time, before returning to normal operation.</p>
<p >note: ALL peripherals will be shutdown in this period. If you wish to keep peripherals active, simply use uBit.sleep();</p>
<p >The current fiber is blocked immediately. Sleep occurs when the scheduler is next idle, unless cancelled by wake up events before then.</p>
<p >If deep sleep is disturbed within the requested time interval, the remainder will be awake.</p>
<p >If the requested time interval is less than CONFIG_MINIMUM_DEEP_SLEEP_TIME, or a wake-up timer cannot be allocated, the sleep will be a simple uBit.sleep() without powering down.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">milliSeconds</td><td>The period of time to sleep, in milliseconds.</td></tr>
  </table>
  </dd>
</dl>
<p>Powers down the CPU and USB interface and instructs peripherals to enter an inoperative low power state. However, all program state is preserved. CPU will deepsleep for the given period of time, before returning to normal operation.</p>
<p >note: ALL peripherals will be shutdown in this period. If you wish to keep peripherals active, simply use uBit.sleep();</p>
<p >The current fiber is blocked immediately. Sleep occurs when the scheduler is next idle, unless cancelled by wake up events before then.</p>
<p >If deep sleep is disturbed within the requested time interval, the remainder will be awake.</p>
<p >If the requested time interval is less than CONFIG_MINIMUM_DEEP_SLEEP_TIME, or a wake-up timer cannot be allocated, the sleep will be a simple uBit.sleep() without powering down.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">milliSeconds</td><td>The period of time to sleep, in milliseconds (minimum CONFIG_MINIMUM_DEEP_SLEEP_TIME). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad885adf902acaf48702e8db1ff662c89" name="ad885adf902acaf48702e8db1ff662c89"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad885adf902acaf48702e8db1ff662c89">&#9670;&nbsp;</a></span>deepSleepAsync()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MicroBitPowerManager::deepSleepAsync </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Powers down the CPU and USB interface and instructs peripherals to enter an inoperative low power state. However, all program state is preserved. CPU will deepsleep until the next codal::Timer event or other wake up source event, before returning to normal operation.</p>
<p >note: ALL peripherals will be shutdown in this period. If you wish to keep peripherals active, simply use uBit.sleep();</p>
<p >The function returns immediately. Power down occurs when the scheduler is next idle, unless cancelled by wake up events before then.</p>
<p >Powers down the CPU and USB interface and instructs peripherals to enter an inoperative low power state. However, all program state is preserved. CPU will deepsleep until the next codal::Timer event or other wake up source event, before returning to normal operation.</p>
<p >note: ALL peripherals will be shutdown in this period. If you wish to keep peripherals active, simply use uBit.sleep();</p>
<p >The function returns immediately. Sleep occurs when the scheduler is next idle. </p>

</div>
</div>
<a id="a6ffb1c585fd98a03cc935f6861d57138" name="a6ffb1c585fd98a03cc935f6861d57138"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ffb1c585fd98a03cc935f6861d57138">&#9670;&nbsp;</a></span>getPowerConsumption()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t MicroBitPowerManager::getPowerConsumption </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Attempts to determine the instantaneous power consumption of this micro:bit. note: This will query the USB interface chip via I2C, and wait for completion.</p>
<dl class="section return"><dt>Returns</dt><dd>the current power consumption of this micro:bit </dd></dl>

</div>
</div>
<a id="a7958eea2b2ad8898d37f2e3279c8b786" name="a7958eea2b2ad8898d37f2e3279c8b786"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7958eea2b2ad8898d37f2e3279c8b786">&#9670;&nbsp;</a></span>getPowerSource()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MicroBitPowerSource MicroBitPowerManager::getPowerSource </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Attempts to determine the power source currently in use on this micro:bit. note: This will query the USB interface chip via I2C, and wait for completion.</p>
<dl class="section return"><dt>Returns</dt><dd>the current power source used by this micro:bit </dd></dl>

</div>
</div>
<a id="a87cb9a395839397f324b82a150ed3bd9" name="a87cb9a395839397f324b82a150ed3bd9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a87cb9a395839397f324b82a150ed3bd9">&#9670;&nbsp;</a></span>getUSBStatus()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MicroBitUSBStatus MicroBitPowerManager::getUSBStatus </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Attempts to determine the status of the USB interface on this micro:bit. note: This will query the USB interface chip via I2C, and wait for completion.</p>
<dl class="section return"><dt>Returns</dt><dd>the current status of the USB interface on this micro:bit </dd></dl>

</div>
</div>
<a id="a5913b2350f3cf2d0d8c86ce4df70388f" name="a5913b2350f3cf2d0d8c86ce4df70388f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5913b2350f3cf2d0d8c86ce4df70388f">&#9670;&nbsp;</a></span>getVersion()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structMicroBitVersion.html">MicroBitVersion</a> MicroBitPowerManager::getVersion </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Attempts to determine the USB interface chip version in use on this micro:bit. note: This will query the USB interface chip via I2C if necessary.</p>
<dl class="section return"><dt>Returns</dt><dd>MicroBitUSBVersion information. </dd></dl>

</div>
</div>
<a id="a011ffdc72a1fe3208bbce4e4a0e8d951" name="a011ffdc72a1fe3208bbce4e4a0e8d951"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a011ffdc72a1fe3208bbce4e4a0e8d951">&#9670;&nbsp;</a></span>idleCallback()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void MicroBitPowerManager::idleCallback </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >A periodic callback invoked by the fiber scheduler idle thread. Service any IRQ requests raised by the USB interface chip. </p>

</div>
</div>
<a id="a4c923688b0640fed1e698694fa99ce54" name="a4c923688b0640fed1e698694fa99ce54"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c923688b0640fed1e698694fa99ce54">&#9670;&nbsp;</a></span>nop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MicroBitPowerManager::nop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Perform a NULL opertion I2C transcation wit the interface chip. This is used to awken the KL27 interface chip from light sleep, as a work around for silicon errata in the KL27.</p>
<p >Perform a NULL opertion I2C transaction with the interface chip if needed. This is used to awken the KL27 interface chip from light sleep, as a work around for silicon errata in the KL27. </p>

</div>
</div>
<a id="a46da79f623174c038f6b8bd1877c90fc" name="a46da79f623174c038f6b8bd1877c90fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a46da79f623174c038f6b8bd1877c90fc">&#9670;&nbsp;</a></span>off()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MicroBitPowerManager::off </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Powers down the CPU and USB interface and enters STANDBY state. All user code and peripherals will cease operation. Device can subsequently be awoken only via a RESET. User program state will be lost and will restart from main().</p>
<p >Powers down the CPU and USB interface and enters OFF state. All user code and peripherals will cease operation. Device can subsequently be awoken only via a RESET. User program state will be lost and will restart from main(). </p>

</div>
</div>
<a id="a933eb99a07dfc5e9da41ed6f5c71adde" name="a933eb99a07dfc5e9da41ed6f5c71adde"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a933eb99a07dfc5e9da41ed6f5c71adde">&#9670;&nbsp;</a></span>powerDownDisable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MicroBitPowerManager::powerDownDisable </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Disable power down during deepSleep The default is enabled. </p>

</div>
</div>
<a id="a7dde03e71b6c1b4c7af947c63482f3a1" name="a7dde03e71b6c1b4c7af947c63482f3a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7dde03e71b6c1b4c7af947c63482f3a1">&#9670;&nbsp;</a></span>powerDownEnable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MicroBitPowerManager::powerDownEnable </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Enable power down during deepSleep The default is enabled. </p>

</div>
</div>
<a id="a4061d7d8e2181565744921eaaa8b542c" name="a4061d7d8e2181565744921eaaa8b542c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4061d7d8e2181565744921eaaa8b542c">&#9670;&nbsp;</a></span>powerDownIsEnabled()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool MicroBitPowerManager::powerDownIsEnabled </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Determine if power down during deepSleep is enabled </p>

</div>
</div>
<a id="ac5144990fe4446cd9cf84c347589aa30" name="ac5144990fe4446cd9cf84c347589aa30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac5144990fe4446cd9cf84c347589aa30">&#9670;&nbsp;</a></span>readProperty()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ManagedBuffer MicroBitPowerManager::readProperty </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>property</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Attempts to issue a control packet to the USB interface chip. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">packet</td><td>The data to send </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A response or error packet </dd></dl>

</div>
</div>
<a id="a7cffd953c8d8b3cdd76efc5208b18467" name="a7cffd953c8d8b3cdd76efc5208b18467"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7cffd953c8d8b3cdd76efc5208b18467">&#9670;&nbsp;</a></span>readyForDeepSleep()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool MicroBitPowerManager::readyForDeepSleep </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >For library use. Determine if the program is ready for deep sleep. </p><dl class="section return"><dt>Returns</dt><dd>true if deep sleep should be entered now</dd></dl>
<p>Determine if the program is ready for deep sleep. For library use. </p><dl class="section return"><dt>Returns</dt><dd>true if deep sleep should be entered now </dd></dl>

</div>
</div>
<a id="a9a7344140cc846bcb7f87df77e102ea4" name="a9a7344140cc846bcb7f87df77e102ea4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a7344140cc846bcb7f87df77e102ea4">&#9670;&nbsp;</a></span>recvUIPMPacket()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ManagedBuffer MicroBitPowerManager::recvUIPMPacket </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Attempts to read a packet from the USB interface chip, either as a response to a prior request, or following an interrupt request.</p>
<dl class="section return"><dt>Returns</dt><dd>A buffer containing the complete response. </dd></dl>

</div>
</div>
<a id="a6d0f7db040ab842c2ddaf0806f362865" name="a6d0f7db040ab842c2ddaf0806f362865"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d0f7db040ab842c2ddaf0806f362865">&#9670;&nbsp;</a></span>sendUIPMPacket()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MicroBitPowerManager::sendUIPMPacket </td>
          <td>(</td>
          <td class="paramtype">ManagedBuffer&#160;</td>
          <td class="paramname"><em>packet</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Attempts to issue a control packet to the USB interface chip. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">packet</td><td>The data to send </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>MICROBIT_OK on success, or an I2C related error code on failure. </dd></dl>

</div>
</div>
<a id="a73d0286be4ba071fd531ab964b4953f6" name="a73d0286be4ba071fd531ab964b4953f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73d0286be4ba071fd531ab964b4953f6">&#9670;&nbsp;</a></span>startDeepSleep()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MicroBitPowerManager::startDeepSleep </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >For library use. Start previosly requested deep sleep. </p><dl class="section return"><dt>Returns</dt><dd>DEVICE_OK if deep sleep occurred, or DEVICE_INVALID_STATE if no usable wake up source is available</dd></dl>
<p>Start previosly requested deep sleep </p><dl class="section return"><dt>Returns</dt><dd>DEVICE_OK if deep sleep occurred, or DEVICE_INVALID_STATE if no usable wake up source is available </dd></dl>

</div>
</div>
<a id="a94d6d674babe6d6b526384aa14855ca4" name="a94d6d674babe6d6b526384aa14855ca4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a94d6d674babe6d6b526384aa14855ca4">&#9670;&nbsp;</a></span>waitingForDeepSleep()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool MicroBitPowerManager::waitingForDeepSleep </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >For library use. Determine if deep sleep has been requested. <br  />
 </p><dl class="section return"><dt>Returns</dt><dd>true if deep sleep has been requested</dd></dl>
<p>Determine if deep sleep has been requested. For library use. </p><dl class="section return"><dt>Returns</dt><dd>true if deep sleep has been requested </dd></dl>

</div>
</div>
<a id="a352bfe73a68e030d8e20c2f3aef40dce" name="a352bfe73a68e030d8e20c2f3aef40dce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a352bfe73a68e030d8e20c2f3aef40dce">&#9670;&nbsp;</a></span>writeProperty()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ManagedBuffer MicroBitPowerManager::writeProperty </td>
          <td>(</td>
          <td class="paramtype">ManagedBuffer&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>ack</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Attempts to issue a control packet to the USB interface chip. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">packet</td><td>The data to send </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>MICROBIT_OK on success </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>inc/<a class="el" href="MicroBitPowerManager_8h_source.html">MicroBitPowerManager.h</a></li>
<li>source/MicroBitPowerManager.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3
</small></address>
</body>
</html>
