<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Microbit CODAL C++ Docs: MicroBitUSBFlashManager Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Microbit CODAL C++ Docs<span id="projectnumber">&#160;1.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classMicroBitUSBFlashManager-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">MicroBitUSBFlashManager Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="MicroBitUSBFlashManager_8h_source.html">MicroBitUSBFlashManager.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for MicroBitUSBFlashManager:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classMicroBitUSBFlashManager.png" alt=""/>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a2f55cefee8330327b9585146635c30fd"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMicroBitUSBFlashManager.html#a2f55cefee8330327b9585146635c30fd">MicroBitUSBFlashManager</a> (<a class="el" href="classcodal_1_1MicroBitI2C.html">MicroBitI2C</a> &amp;i2c, <a class="el" href="classcodal_1_1MicroBitIO.html">MicroBitIO</a> &amp;ioPins, <a class="el" href="classMicroBitPowerManager.html">MicroBitPowerManager</a> &amp;powerManager, uint16_t id=MICROBIT_ID_USB_FLASH_MANAGER)</td></tr>
<tr class="separator:a2f55cefee8330327b9585146635c30fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a852af74b4bcdb708f7af5a397c1093"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structMicroBitUSBFlashConfig.html">MicroBitUSBFlashConfig</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMicroBitUSBFlashManager.html#a9a852af74b4bcdb708f7af5a397c1093">getConfiguration</a> ()</td></tr>
<tr class="separator:a9a852af74b4bcdb708f7af5a397c1093"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe7b6e893700222c6992282c9e1200e5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMicroBitUSBFlashManager.html#abe7b6e893700222c6992282c9e1200e5">setConfiguration</a> (<a class="el" href="structMicroBitUSBFlashConfig.html">MicroBitUSBFlashConfig</a> config, bool persist=false)</td></tr>
<tr class="separator:abe7b6e893700222c6992282c9e1200e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a797603f32f416472650b9c8a3652ca"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structMicroBitUSBFlashGeometry.html">MicroBitUSBFlashGeometry</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMicroBitUSBFlashManager.html#a2a797603f32f416472650b9c8a3652ca">getGeometry</a> ()</td></tr>
<tr class="separator:a2a797603f32f416472650b9c8a3652ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a1671383803767b90f985d1f4999b10"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMicroBitUSBFlashManager.html#a9a1671383803767b90f985d1f4999b10">remount</a> ()</td></tr>
<tr class="separator:a9a1671383803767b90f985d1f4999b10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5fa138fc03c6d6b8d41788df3306a96e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMicroBitUSBFlashManager.html#a5fa138fc03c6d6b8d41788df3306a96e">eraseConfig</a> ()</td></tr>
<tr class="separator:a5fa138fc03c6d6b8d41788df3306a96e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbff74498ccdc31fd5435111bea8d167"><td class="memItemLeft" align="right" valign="top">ManagedBuffer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMicroBitUSBFlashManager.html#afbff74498ccdc31fd5435111bea8d167">read</a> (uint32_t address, uint32_t length)</td></tr>
<tr class="separator:afbff74498ccdc31fd5435111bea8d167"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe2c5b72a517473a47676020028ff1d5"><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMicroBitUSBFlashManager.html#afe2c5b72a517473a47676020028ff1d5">read</a> (uint32_t *dest, uint32_t address, uint32_t length) override</td></tr>
<tr class="separator:afe2c5b72a517473a47676020028ff1d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae95fe18313170c04a147df89b6795176"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMicroBitUSBFlashManager.html#ae95fe18313170c04a147df89b6795176">write</a> (uint32_t address, uint32_t *data, uint32_t length) override</td></tr>
<tr class="separator:ae95fe18313170c04a147df89b6795176"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24184ecaae76e7739a0627cb50825268"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMicroBitUSBFlashManager.html#a24184ecaae76e7739a0627cb50825268">write</a> (ManagedBuffer data, uint32_t address)</td></tr>
<tr class="separator:a24184ecaae76e7739a0627cb50825268"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06ecc7bdd4a5aefc60ee068cd3f6f445"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMicroBitUSBFlashManager.html#a06ecc7bdd4a5aefc60ee068cd3f6f445">erase</a> (uint32_t address, uint32_t length)</td></tr>
<tr class="separator:a06ecc7bdd4a5aefc60ee068cd3f6f445"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b5dce0e604e07a008807922861971b1"><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMicroBitUSBFlashManager.html#a7b5dce0e604e07a008807922861971b1">erase</a> (uint32_t page) override</td></tr>
<tr class="separator:a7b5dce0e604e07a008807922861971b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af76ff773d9995d24a0b2e0ef554f0e39"><td class="memItemLeft" align="right" valign="top">virtual uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMicroBitUSBFlashManager.html#af76ff773d9995d24a0b2e0ef554f0e39">getFlashStart</a> () override</td></tr>
<tr class="separator:af76ff773d9995d24a0b2e0ef554f0e39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f690c18e44ced704282146de268cbe6"><td class="memItemLeft" align="right" valign="top">virtual uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMicroBitUSBFlashManager.html#a9f690c18e44ced704282146de268cbe6">getFlashEnd</a> () override</td></tr>
<tr class="separator:a9f690c18e44ced704282146de268cbe6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0b058e9f4f135e640d97daf9040f199"><td class="memItemLeft" align="right" valign="top">virtual uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMicroBitUSBFlashManager.html#aa0b058e9f4f135e640d97daf9040f199">getPageSize</a> () override</td></tr>
<tr class="separator:aa0b058e9f4f135e640d97daf9040f199"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0bf76443acf483e783f1077782ed3cd"><td class="memItemLeft" align="right" valign="top">virtual uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMicroBitUSBFlashManager.html#af0bf76443acf483e783f1077782ed3cd">getFlashSize</a> () override</td></tr>
<tr class="separator:af0bf76443acf483e783f1077782ed3cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8bb9d25e1c7a48db10908b9489ce79d3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMicroBitUSBFlashManager.html#a8bb9d25e1c7a48db10908b9489ce79d3">~MicroBitUSBFlashManager</a> ()</td></tr>
<tr class="separator:a8bb9d25e1c7a48db10908b9489ce79d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Class definition for <a class="el" href="classMicroBitUSBFlashManager.html">MicroBitUSBFlashManager</a>. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a2f55cefee8330327b9585146635c30fd" name="a2f55cefee8330327b9585146635c30fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f55cefee8330327b9585146635c30fd">&#9670;&nbsp;</a></span>MicroBitUSBFlashManager()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MicroBitUSBFlashManager::MicroBitUSBFlashManager </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcodal_1_1MicroBitI2C.html">MicroBitI2C</a> &amp;&#160;</td>
          <td class="paramname"><em>i2c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classcodal_1_1MicroBitIO.html">MicroBitIO</a> &amp;&#160;</td>
          <td class="paramname"><em>ioPins</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classMicroBitPowerManager.html">MicroBitPowerManager</a> &amp;&#160;</td>
          <td class="paramname"><em>powerManager</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>id</em> = <code>MICROBIT_ID_USB_FLASH_MANAGER</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Constructor. Create a software abstraction of a USB Flash manager.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">i2c</td><td>the I2C bus to use to communicate with the micro:bit USB interface chip </td></tr>
    <tr><td class="paramname">ioPins</td><td>the IO pins in use on this device. </td></tr>
    <tr><td class="paramname">id</td><td>the unique EventModel id of this component. Defaults to: MICROBIT_ID_USB_FLASH_MANAGER </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a8bb9d25e1c7a48db10908b9489ce79d3" name="a8bb9d25e1c7a48db10908b9489ce79d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8bb9d25e1c7a48db10908b9489ce79d3">&#9670;&nbsp;</a></span>~MicroBitUSBFlashManager()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MicroBitUSBFlashManager::~MicroBitUSBFlashManager </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Destructor. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a06ecc7bdd4a5aefc60ee068cd3f6f445" name="a06ecc7bdd4a5aefc60ee068cd3f6f445"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06ecc7bdd4a5aefc60ee068cd3f6f445">&#9670;&nbsp;</a></span>erase() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MicroBitUSBFlashManager::erase </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Flash Erase one or more physical blocks in the USB file staorage area. n.b. this method will perform an ERASE operation on all physical memory blocks that are are part of the specified region.</p>
<p >If the specified region is not aligned to physical block boundaries as defined by the disks geometry, areas in an overlapping block outside the given range will be automatically read, erased and rewritten.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">address</td><td>the logical address of the memory to start the erase operation. </td></tr>
    <tr><td class="paramname">length</td><td>the number of 32-bit words to erase.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>DEVICE_OK on success, or error code. </dd></dl>

</div>
</div>
<a id="a7b5dce0e604e07a008807922861971b1" name="a7b5dce0e604e07a008807922861971b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b5dce0e604e07a008807922861971b1">&#9670;&nbsp;</a></span>erase() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int MicroBitUSBFlashManager::erase </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>page</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Erases a given page in non-volatile memory.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">page</td><td>The address of the page to erase (logical address of the start of the page). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a5fa138fc03c6d6b8d41788df3306a96e" name="a5fa138fc03c6d6b8d41788df3306a96e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5fa138fc03c6d6b8d41788df3306a96e">&#9670;&nbsp;</a></span>eraseConfig()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MicroBitUSBFlashManager::eraseConfig </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Reset the KL27 Flash Storage configuration to its default settings.</p>
<dl class="section return"><dt>Returns</dt><dd>DEVICE_OK on success, or error code. </dd></dl>

</div>
</div>
<a id="a9a852af74b4bcdb708f7af5a397c1093" name="a9a852af74b4bcdb708f7af5a397c1093"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a852af74b4bcdb708f7af5a397c1093">&#9670;&nbsp;</a></span>getConfiguration()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structMicroBitUSBFlashConfig.html">MicroBitUSBFlashConfig</a> MicroBitUSBFlashManager::getConfiguration </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Determines the filename, filesize and visibility of the USB file presented on the MICROBIT drive. note: This may query the USB interface chip via I2C, and wait for completion.</p>
<dl class="section return"><dt>Returns</dt><dd>a configuration structure containing the current USB File interface confuguration. </dd></dl>

</div>
</div>
<a id="a9f690c18e44ced704282146de268cbe6" name="a9f690c18e44ced704282146de268cbe6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f690c18e44ced704282146de268cbe6">&#9670;&nbsp;</a></span>getFlashEnd()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t MicroBitUSBFlashManager::getFlashEnd </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Determines the logical address of the end of the non-volatile memory region</p>
<dl class="section return"><dt>Returns</dt><dd>The logical address of the first invalid logical address beyond the non-volatile memory. </dd></dl>

</div>
</div>
<a id="af0bf76443acf483e783f1077782ed3cd" name="af0bf76443acf483e783f1077782ed3cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af0bf76443acf483e783f1077782ed3cd">&#9670;&nbsp;</a></span>getFlashSize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t MicroBitUSBFlashManager::getFlashSize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Determines the amount of available storage.</p>
<dl class="section return"><dt>Returns</dt><dd>the amount of available storage, in bytes. </dd></dl>

</div>
</div>
<a id="af76ff773d9995d24a0b2e0ef554f0e39" name="af76ff773d9995d24a0b2e0ef554f0e39"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af76ff773d9995d24a0b2e0ef554f0e39">&#9670;&nbsp;</a></span>getFlashStart()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t MicroBitUSBFlashManager::getFlashStart </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Determines the logical address of the start of non-volatile memory region</p>
<dl class="section return"><dt>Returns</dt><dd>The logical address of the first valid logical address in the region of non-volatile memory </dd></dl>

</div>
</div>
<a id="a2a797603f32f416472650b9c8a3652ca" name="a2a797603f32f416472650b9c8a3652ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a797603f32f416472650b9c8a3652ca">&#9670;&nbsp;</a></span>getGeometry()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structMicroBitUSBFlashGeometry.html">MicroBitUSBFlashGeometry</a> MicroBitUSBFlashManager::getGeometry </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Determines the physical blocksize and number of blocks available in the USB file storage. note: This may query the USB interface chip via I2C, and wait for completion.</p>
<dl class="section return"><dt>Returns</dt><dd>a configuration structure containing the geeometry of the USB file storage area. </dd></dl>

</div>
</div>
<a id="aa0b058e9f4f135e640d97daf9040f199" name="aa0b058e9f4f135e640d97daf9040f199"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa0b058e9f4f135e640d97daf9040f199">&#9670;&nbsp;</a></span>getPageSize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t MicroBitUSBFlashManager::getPageSize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Determines the size of a non-volatile memory page. A page is defined as the block of memory the can be efficiently erased without impacted on other regions of memory.</p>
<dl class="section return"><dt>Returns</dt><dd>The size of a single page in bytes. </dd></dl>

</div>
</div>
<a id="afe2c5b72a517473a47676020028ff1d5" name="afe2c5b72a517473a47676020028ff1d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe2c5b72a517473a47676020028ff1d5">&#9670;&nbsp;</a></span>read() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int MicroBitUSBFlashManager::read </td>
          <td>(</td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Reads a block of memory from non-volatile memory into RAM</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dest</td><td>The address in RAM in which to store the result of the read operation </td></tr>
    <tr><td class="paramname">address</td><td>The logical address in non-voltile memory to read from </td></tr>
    <tr><td class="paramname">length</td><td>The number 32-bit words to read. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="afbff74498ccdc31fd5435111bea8d167" name="afbff74498ccdc31fd5435111bea8d167"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afbff74498ccdc31fd5435111bea8d167">&#9670;&nbsp;</a></span>read() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ManagedBuffer MicroBitUSBFlashManager::read </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Reads data from the specified location in the USB file staorage area.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">address</td><td>the logical address of the memory to read. </td></tr>
    <tr><td class="paramname">length</td><td>the number of 32-bit words to read.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the data read, or a zero length buffer on failure. </dd></dl>

</div>
</div>
<a id="a9a1671383803767b90f985d1f4999b10" name="a9a1671383803767b90f985d1f4999b10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a1671383803767b90f985d1f4999b10">&#9670;&nbsp;</a></span>remount()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MicroBitUSBFlashManager::remount </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Remounts the USB MICROBIT drive, if it is connected.</p>
<dl class="section return"><dt>Returns</dt><dd>DEVICE_OK on success, or error code. </dd></dl>

</div>
</div>
<a id="abe7b6e893700222c6992282c9e1200e5" name="abe7b6e893700222c6992282c9e1200e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe7b6e893700222c6992282c9e1200e5">&#9670;&nbsp;</a></span>setConfiguration()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MicroBitUSBFlashManager::setConfiguration </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structMicroBitUSBFlashConfig.html">MicroBitUSBFlashConfig</a>&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>persist</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Updates the filename, filesize and visibility of the USB file presented on the MICROBIT drive. note: This will update the USB interface chip via I2C, and wait for completion.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">config</td><td>the new configuration to write </td></tr>
    <tr><td class="paramname">persist</td><td>true if the configuraiton should be permananet across device reset, false otherwise.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>DEVICE_OK on success, or error code. </dd></dl>

</div>
</div>
<a id="a24184ecaae76e7739a0627cb50825268" name="a24184ecaae76e7739a0627cb50825268"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a24184ecaae76e7739a0627cb50825268">&#9670;&nbsp;</a></span>write() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MicroBitUSBFlashManager::write </td>
          <td>(</td>
          <td class="paramtype">ManagedBuffer&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>address</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Writes data to the specified location in the USB file staorage area.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>a buffer containing the data to write. Length MUST be 32-bit aligned. </td></tr>
    <tr><td class="paramname">address</td><td>the location to write to</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>DEVICE_OK on success, or error code.</dd></dl>
<p>Writes data to the specified location in the USB file staorage area.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>a buffer containing the data to write. Length MUST be 32-bit aligned. </td></tr>
    <tr><td class="paramname">address</td><td>the location to write to.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>DEVICE_OK on success, or error code. </dd></dl>

</div>
</div>
<a id="ae95fe18313170c04a147df89b6795176" name="ae95fe18313170c04a147df89b6795176"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae95fe18313170c04a147df89b6795176">&#9670;&nbsp;</a></span>write() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int MicroBitUSBFlashManager::write </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Writes data to the specified location in the USB file staorage area.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>a buffer containing the data to write </td></tr>
    <tr><td class="paramname">address</td><td>the location to write to </td></tr>
    <tr><td class="paramname">length</td><td>the number of 32-bit words to write</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>DEVICE_OK on success, or error code.</dd></dl>
<p>Writes data to the specified location in the USB file staorage area.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>a buffer containing the data to write </td></tr>
    <tr><td class="paramname">address</td><td>the location to write to. Must be 32 bit aligned. </td></tr>
    <tr><td class="paramname">length</td><td>the number of 32 bit words to write</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>DEVICE_OK on success, or error code. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>inc/<a class="el" href="MicroBitUSBFlashManager_8h_source.html">MicroBitUSBFlashManager.h</a></li>
<li>source/MicroBitUSBFlashManager.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3
</small></address>
</body>
</html>
