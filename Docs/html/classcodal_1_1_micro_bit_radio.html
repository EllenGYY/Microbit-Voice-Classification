<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Microbit-V2: codal::MicroBitRadio Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Microbit-V2<span id="projectnumber">&#160;1.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('classcodal_1_1_micro_bit_radio.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="classcodal_1_1_micro_bit_radio-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">codal::MicroBitRadio Class Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for codal::MicroBitRadio:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classcodal_1_1_micro_bit_radio.png" usemap="#codal::MicroBitRadio_map" alt=""/>
  <map id="codal::MicroBitRadio_map" name="codal::MicroBitRadio_map">
<area href="classcodal_1_1_codal_component.html" alt="codal::CodalComponent" shape="rect" coords="0,0,145,24"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a99c4390ec9c1d6fdc0cd53cd1e6097df"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcodal_1_1_micro_bit_radio.html#a99c4390ec9c1d6fdc0cd53cd1e6097df">MicroBitRadio</a> (uint16_t id=DEVICE_ID_RADIO)</td></tr>
<tr class="separator:a99c4390ec9c1d6fdc0cd53cd1e6097df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22c58555cb966cac91b019b4a3224ea4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcodal_1_1_micro_bit_radio.html#a22c58555cb966cac91b019b4a3224ea4">setTransmitPower</a> (int power)</td></tr>
<tr class="separator:a22c58555cb966cac91b019b4a3224ea4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad678111bc8b52e3e503c13c99292488d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcodal_1_1_micro_bit_radio.html#ad678111bc8b52e3e503c13c99292488d">setFrequencyBand</a> (int band)</td></tr>
<tr class="separator:ad678111bc8b52e3e503c13c99292488d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41caabb768ac6a4c4699ab12b8dc916f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structcodal_1_1_frame_buffer.html">FrameBuffer</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcodal_1_1_micro_bit_radio.html#a41caabb768ac6a4c4699ab12b8dc916f">getRxBuf</a> ()</td></tr>
<tr class="separator:a41caabb768ac6a4c4699ab12b8dc916f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e51ee9c5cfb29222c53f846fad5f3c1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcodal_1_1_micro_bit_radio.html#a2e51ee9c5cfb29222c53f846fad5f3c1">queueRxBuf</a> ()</td></tr>
<tr class="separator:a2e51ee9c5cfb29222c53f846fad5f3c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e6d2d77e2e0ee53d4841b71688ff0f0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcodal_1_1_micro_bit_radio.html#a3e6d2d77e2e0ee53d4841b71688ff0f0">setRSSI</a> (int rssi)</td></tr>
<tr class="separator:a3e6d2d77e2e0ee53d4841b71688ff0f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8eb8db40df78759a0a44b46d2ac11bb"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcodal_1_1_micro_bit_radio.html#aa8eb8db40df78759a0a44b46d2ac11bb">getRSSI</a> ()</td></tr>
<tr class="separator:aa8eb8db40df78759a0a44b46d2ac11bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93853362380c62268cb2d717dfce507a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcodal_1_1_micro_bit_radio.html#a93853362380c62268cb2d717dfce507a">enable</a> ()</td></tr>
<tr class="separator:a93853362380c62268cb2d717dfce507a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aadda168d5c441492cd2e2c3c65bf9cd6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcodal_1_1_micro_bit_radio.html#aadda168d5c441492cd2e2c3c65bf9cd6">disable</a> ()</td></tr>
<tr class="separator:aadda168d5c441492cd2e2c3c65bf9cd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaea63063ec112da0da66100023537cfc"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcodal_1_1_micro_bit_radio.html#aaea63063ec112da0da66100023537cfc">setGroup</a> (uint8_t group)</td></tr>
<tr class="separator:aaea63063ec112da0da66100023537cfc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53d474c73e3088ac7baa458d8719d60f"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcodal_1_1_micro_bit_radio.html#a53d474c73e3088ac7baa458d8719d60f">idleCallback</a> ()</td></tr>
<tr class="separator:a53d474c73e3088ac7baa458d8719d60f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f1bd649c6bb8558a13de516d3a91164"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcodal_1_1_micro_bit_radio.html#a2f1bd649c6bb8558a13de516d3a91164">dataReady</a> ()</td></tr>
<tr class="separator:a2f1bd649c6bb8558a13de516d3a91164"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a374a3ab6c089a57ebb3e7276c4c713dd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structcodal_1_1_frame_buffer.html">FrameBuffer</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcodal_1_1_micro_bit_radio.html#a374a3ab6c089a57ebb3e7276c4c713dd">recv</a> ()</td></tr>
<tr class="separator:a374a3ab6c089a57ebb3e7276c4c713dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20a6f5c9b7e45c8e624da711098273f8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcodal_1_1_micro_bit_radio.html#a20a6f5c9b7e45c8e624da711098273f8">send</a> (<a class="el" href="structcodal_1_1_frame_buffer.html">FrameBuffer</a> *buffer)</td></tr>
<tr class="separator:a20a6f5c9b7e45c8e624da711098273f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a319319823dac16ca155933f316b5f98f"><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcodal_1_1_micro_bit_radio.html#a319319823dac16ca155933f316b5f98f">setSleep</a> (bool doSleep) override</td></tr>
<tr class="separator:a319319823dac16ca155933f316b5f98f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a2c9cc2f8fda964c6b757825e24e31e54"><td class="memItemLeft" align="right" valign="top"><a id="a2c9cc2f8fda964c6b757825e24e31e54" name="a2c9cc2f8fda964c6b757825e24e31e54"></a>
<a class="el" href="classcodal_1_1_micro_bit_radio_datagram.html">MicroBitRadioDatagram</a>&#160;</td><td class="memItemRight" valign="bottom"><b>datagram</b></td></tr>
<tr class="separator:a2c9cc2f8fda964c6b757825e24e31e54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a2360f5d2003c4c993446adf959d8c9"><td class="memItemLeft" align="right" valign="top"><a id="a5a2360f5d2003c4c993446adf959d8c9" name="a5a2360f5d2003c4c993446adf959d8c9"></a>
<a class="el" href="classcodal_1_1_micro_bit_radio_event.html">MicroBitRadioEvent</a>&#160;</td><td class="memItemRight" valign="bottom"><b>event</b></td></tr>
<tr class="separator:a5a2360f5d2003c4c993446adf959d8c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-attribs" name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:a87fff697cb02bf4ad1ef95f65b5bf868"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classcodal_1_1_micro_bit_radio.html">MicroBitRadio</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcodal_1_1_micro_bit_radio.html#a87fff697cb02bf4ad1ef95f65b5bf868">instance</a> = NULL</td></tr>
<tr class="separator:a87fff697cb02bf4ad1ef95f65b5bf868"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a99c4390ec9c1d6fdc0cd53cd1e6097df" name="a99c4390ec9c1d6fdc0cd53cd1e6097df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a99c4390ec9c1d6fdc0cd53cd1e6097df">&#9670;&nbsp;</a></span>MicroBitRadio()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MicroBitRadio::MicroBitRadio </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>id</em> = <code>DEVICE_ID_RADIO</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Constructor.</p>
<p >Initialise the <a class="el" href="classcodal_1_1_micro_bit_radio.html">MicroBitRadio</a>.</p>
<dl class="section note"><dt>Note</dt><dd>This class is demand activated, as a result most resources are only committed if send/recv or event registrations calls are made. </dd></dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a2f1bd649c6bb8558a13de516d3a91164" name="a2f1bd649c6bb8558a13de516d3a91164"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f1bd649c6bb8558a13de516d3a91164">&#9670;&nbsp;</a></span>dataReady()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MicroBitRadio::dataReady </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Determines the number of packets ready to be processed.</p>
<dl class="section return"><dt>Returns</dt><dd>The number of packets in the receive buffer. </dd></dl>

</div>
</div>
<a id="aadda168d5c441492cd2e2c3c65bf9cd6" name="aadda168d5c441492cd2e2c3c65bf9cd6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aadda168d5c441492cd2e2c3c65bf9cd6">&#9670;&nbsp;</a></span>disable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MicroBitRadio::disable </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Disables the radio for use as a multipoint sender/receiver.</p>
<dl class="section return"><dt>Returns</dt><dd>MICROBIT_OK on success, MICROBIT_NOT_SUPPORTED if the BLE stack is running.</dd></dl>
<p>Disables the radio for use as a multipoint sender/receiver.</p>
<dl class="section return"><dt>Returns</dt><dd>DEVICE_OK on success, DEVICE_NOT_SUPPORTED if the BLE stack is running. </dd></dl>

</div>
</div>
<a id="a93853362380c62268cb2d717dfce507a" name="a93853362380c62268cb2d717dfce507a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a93853362380c62268cb2d717dfce507a">&#9670;&nbsp;</a></span>enable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MicroBitRadio::enable </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Initialises the radio for use as a multipoint sender/receiver</p>
<dl class="section return"><dt>Returns</dt><dd>MICROBIT_OK on success, MICROBIT_NOT_SUPPORTED if the BLE stack is running.</dd></dl>
<p>Initialises the radio for use as a multipoint sender/receiver</p>
<dl class="section return"><dt>Returns</dt><dd>DEVICE_OK on success, DEVICE_NOT_SUPPORTED if the BLE stack is running. </dd></dl>

</div>
</div>
<a id="aa8eb8db40df78759a0a44b46d2ac11bb" name="aa8eb8db40df78759a0a44b46d2ac11bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa8eb8db40df78759a0a44b46d2ac11bb">&#9670;&nbsp;</a></span>getRSSI()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MicroBitRadio::getRSSI </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Retrieves the current RSSI for the most recent packet. The return value is measured in -dbm. The higher the value, the stronger the signal. Typical values are in the range -42 to -128.</p>
<dl class="section return"><dt>Returns</dt><dd>the most recent RSSI value or MICROBIT_NOT_SUPPORTED if the BLE stack is running.</dd></dl>
<p>Retrieves the current RSSI for the most recent packet. The return value is measured in -dbm. The higher the value, the stronger the signal. Typical values are in the range -42 to -128.</p>
<dl class="section return"><dt>Returns</dt><dd>the most recent RSSI value or DEVICE_NOT_SUPPORTED if the BLE stack is running. </dd></dl>

</div>
</div>
<a id="a41caabb768ac6a4c4699ab12b8dc916f" name="a41caabb768ac6a4c4699ab12b8dc916f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a41caabb768ac6a4c4699ab12b8dc916f">&#9670;&nbsp;</a></span>getRxBuf()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structcodal_1_1_frame_buffer.html">FrameBuffer</a> * MicroBitRadio::getRxBuf </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Retrieve a pointer to the currently allocated receive buffer. This is the area of memory actively being used by the radio hardware to store incoming data.</p>
<dl class="section return"><dt>Returns</dt><dd>a pointer to the current receive buffer. </dd></dl>

</div>
</div>
<a id="a53d474c73e3088ac7baa458d8719d60f" name="a53d474c73e3088ac7baa458d8719d60f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a53d474c73e3088ac7baa458d8719d60f">&#9670;&nbsp;</a></span>idleCallback()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void MicroBitRadio::idleCallback </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >A background, low priority callback that is triggered whenever the processor is idle. Here, we empty our queue of received packets, and pass them onto higher level protocol handlers. </p>

<p>Reimplemented from <a class="el" href="classcodal_1_1_codal_component.html#a37dab3cb4347533746d0e4f557e8feb5">codal::CodalComponent</a>.</p>

</div>
</div>
<a id="a2e51ee9c5cfb29222c53f846fad5f3c1" name="a2e51ee9c5cfb29222c53f846fad5f3c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e51ee9c5cfb29222c53f846fad5f3c1">&#9670;&nbsp;</a></span>queueRxBuf()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MicroBitRadio::queueRxBuf </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Attempt to queue a buffer received by the radio hardware, if sufficient space is available.</p>
<dl class="section return"><dt>Returns</dt><dd>MICROBIT_OK on success, or MICROBIT_NO_RESOURCES if a replacement receiver buffer could not be allocated (either by policy or memory exhaustion).</dd></dl>
<p>Attempt to queue a buffer received by the radio hardware, if sufficient space is available.</p>
<dl class="section return"><dt>Returns</dt><dd>DEVICE_OK on success, or DEVICE_NO_RESOURCES if a replacement receiver buffer could not be allocated (either by policy or memory exhaustion). </dd></dl>

</div>
</div>
<a id="a374a3ab6c089a57ebb3e7276c4c713dd" name="a374a3ab6c089a57ebb3e7276c4c713dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a374a3ab6c089a57ebb3e7276c4c713dd">&#9670;&nbsp;</a></span>recv()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structcodal_1_1_frame_buffer.html">FrameBuffer</a> * MicroBitRadio::recv </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Retrieves the next packet from the receive buffer. If a data packet is available, then it will be returned immediately to the caller. This call will also dequeue the buffer.</p>
<dl class="section return"><dt>Returns</dt><dd>The buffer containing the the packet. If no data is available, NULL is returned.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Once <a class="el" href="classcodal_1_1_micro_bit_radio.html#a374a3ab6c089a57ebb3e7276c4c713dd">recv()</a> has been called, it is the callers responsibility to delete the buffer when appropriate. </dd></dl>

</div>
</div>
<a id="a20a6f5c9b7e45c8e624da711098273f8" name="a20a6f5c9b7e45c8e624da711098273f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20a6f5c9b7e45c8e624da711098273f8">&#9670;&nbsp;</a></span>send()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MicroBitRadio::send </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcodal_1_1_frame_buffer.html">FrameBuffer</a> *&#160;</td>
          <td class="paramname"><em>buffer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Transmits the given buffer onto the broadcast radio. The call will wait until the transmission of the packet has completed before returning.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>The packet contents to transmit.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>MICROBIT_OK on success, or MICROBIT_NOT_SUPPORTED if the BLE stack is running.</dd></dl>
<p>Transmits the given buffer onto the broadcast radio. The call will wait until the transmission of the packet has completed before returning.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>The packet contents to transmit.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>DEVICE_OK on success, or DEVICE_NOT_SUPPORTED if the BLE stack is running. </dd></dl>

</div>
</div>
<a id="ad678111bc8b52e3e503c13c99292488d" name="ad678111bc8b52e3e503c13c99292488d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad678111bc8b52e3e503c13c99292488d">&#9670;&nbsp;</a></span>setFrequencyBand()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MicroBitRadio::setFrequencyBand </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>band</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Change the transmission and reception band of the radio to the given channel</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">band</td><td>a frequency band in the range 0 - 100. Each step is 1MHz wide, based at 2400MHz.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>MICROBIT_OK on success, or MICROBIT_INVALID_PARAMETER if the value is out of range, or MICROBIT_NOT_SUPPORTED if the BLE stack is running.</dd></dl>
<p>Change the transmission and reception band of the radio to the given channel</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">band</td><td>a frequency band in the range 0 - 100. Each step is 1MHz wide, based at 2400MHz.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>DEVICE_OK on success, or DEVICE_INVALID_PARAMETER if the value is out of range, or DEVICE_NOT_SUPPORTED if the BLE stack is running. </dd></dl>

</div>
</div>
<a id="aaea63063ec112da0da66100023537cfc" name="aaea63063ec112da0da66100023537cfc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaea63063ec112da0da66100023537cfc">&#9670;&nbsp;</a></span>setGroup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MicroBitRadio::setGroup </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>group</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Sets the radio to listen to packets sent with the given group id.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">group</td><td>The group to join. A micro:bit can only listen to one group ID at any time.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>MICROBIT_OK on success, or MICROBIT_NOT_SUPPORTED if the BLE stack is running.</dd></dl>
<p>Sets the radio to listen to packets sent with the given group id.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">group</td><td>The group to join. A micro:bit can only listen to one group ID at any time.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>DEVICE_OK on success, or DEVICE_NOT_SUPPORTED if the BLE stack is running. </dd></dl>

</div>
</div>
<a id="a3e6d2d77e2e0ee53d4841b71688ff0f0" name="a3e6d2d77e2e0ee53d4841b71688ff0f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e6d2d77e2e0ee53d4841b71688ff0f0">&#9670;&nbsp;</a></span>setRSSI()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MicroBitRadio::setRSSI </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>rssi</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Sets the RSSI for the most recent packet. The value is measured in -dbm. The higher the value, the stronger the signal. Typical values are in the range -42 to -128.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rssi</td><td>the new rssi value.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>should only be called from RADIO_IRQHandler... </dd></dl>

</div>
</div>
<a id="a319319823dac16ca155933f316b5f98f" name="a319319823dac16ca155933f316b5f98f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a319319823dac16ca155933f316b5f98f">&#9670;&nbsp;</a></span>setSleep()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int MicroBitRadio::setSleep </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>doSleep</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Puts the component in (or out of) sleep (low power) mode. </p>

<p>Reimplemented from <a class="el" href="classcodal_1_1_codal_component.html#a4b23a42b7cb0cbb4c102b5b8bc5dcfde">codal::CodalComponent</a>.</p>

</div>
</div>
<a id="a22c58555cb966cac91b019b4a3224ea4" name="a22c58555cb966cac91b019b4a3224ea4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22c58555cb966cac91b019b4a3224ea4">&#9670;&nbsp;</a></span>setTransmitPower()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MicroBitRadio::setTransmitPower </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>power</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Change the output power level of the transmitter to the given value.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">power</td><td>a value in the range 0..7, where 0 is the lowest power and 7 is the highest.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>MICROBIT_OK on success, or MICROBIT_INVALID_PARAMETER if the value is out of range.</dd></dl>
<p>Change the output power level of the transmitter to the given value.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">power</td><td>a value in the range 0..7, where 0 is the lowest power and 7 is the highest.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>DEVICE_OK on success, or DEVICE_INVALID_PARAMETER if the value is out of range. </dd></dl>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a87fff697cb02bf4ad1ef95f65b5bf868" name="a87fff697cb02bf4ad1ef95f65b5bf868"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a87fff697cb02bf4ad1ef95f65b5bf868">&#9670;&nbsp;</a></span>instance</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcodal_1_1_micro_bit_radio.html">MicroBitRadio</a> * MicroBitRadio::instance = NULL</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Provides a simple broadcast radio abstraction, built upon the raw nrf51822 RADIO module.</p>
<p >The nrf51822 RADIO module supports a number of proprietary modes of operation in addition to the typical BLE usage. This class uses one of these modes to enable simple, point to multipoint communication directly between micro:bits.</p>
<p >TODO: The protocols implemented here do not currently perform any significant form of energy management, which means that they will consume far more energy than their BLE equivalent. Later versions of the protocol should look to address this through energy efficient broadcast techniques / sleep scheduling. In particular, the GLOSSY approach to efficient rebroadcast and network synchronisation would likely provide an effective future step.</p>
<p >TODO: Meshing should also be considered - again a GLOSSY approach may be effective here, and highly complementary to the master/slave arachitecture of BLE.</p>
<p >TODO: This implementation may only operated whilst the BLE stack is disabled. The nrf51822 provides a timeslot API to allow BLE to cohabit with other protocols. Future work to allow this colocation would be benefical, and would also allow for the creation of wireless BLE bridges.</p>
<p >NOTE: This API does not contain any form of encryption, authentication or authorisation. Its purpose is solely for use as a teaching aid to demonstrate how simple communications operates, and to provide a sandpit through which learning can take place. For serious applications, BLE should be considered a substantially more secure alternative. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>New folder/codal-microbit-v2/inc/<a class="el" href="_micro_bit_radio_8h_source.html">MicroBitRadio.h</a></li>
<li>New folder/codal-microbit-v2/source/MicroBitRadio.cpp</li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacecodal.html">codal</a></li><li class="navelem"><a class="el" href="classcodal_1_1_micro_bit_radio.html">MicroBitRadio</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3 </li>
  </ul>
</div>
</body>
</html>
