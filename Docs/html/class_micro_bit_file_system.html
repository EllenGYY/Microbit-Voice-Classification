<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Microbit-V2: MicroBitFileSystem Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Microbit-V2<span id="projectnumber">&#160;1.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('class_micro_bit_file_system.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="class_micro_bit_file_system-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">MicroBitFileSystem Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Class definition for the MicroBit File system.  
 <a href="class_micro_bit_file_system.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_micro_bit_file_system_8h_source.html">MicroBitFileSystem.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a7f6a046c9bfc89fc40bfb420a3a64f0f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_micro_bit_file_system.html#a7f6a046c9bfc89fc40bfb420a3a64f0f">MicroBitFileSystem</a> (uint32_t flashStart=0, int flashPages=0)</td></tr>
<tr class="separator:a7f6a046c9bfc89fc40bfb420a3a64f0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89afb809c323b6fbdde58fe0b4cf8537"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_micro_bit_file_system.html#a89afb809c323b6fbdde58fe0b4cf8537">open</a> (char const *filename, uint32_t flags)</td></tr>
<tr class="separator:a89afb809c323b6fbdde58fe0b4cf8537"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a730330ff013ea29087c30493f7969f24"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_micro_bit_file_system.html#a730330ff013ea29087c30493f7969f24">flush</a> (int fd)</td></tr>
<tr class="separator:a730330ff013ea29087c30493f7969f24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85b7705bab1bbb267b4db0231ee30fc1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_micro_bit_file_system.html#a85b7705bab1bbb267b4db0231ee30fc1">close</a> (int fd)</td></tr>
<tr class="separator:a85b7705bab1bbb267b4db0231ee30fc1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04f5ee2e8fb6d9fc08108aa852f97693"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_micro_bit_file_system.html#a04f5ee2e8fb6d9fc08108aa852f97693">seek</a> (int fd, int offset, uint8_t flags)</td></tr>
<tr class="separator:a04f5ee2e8fb6d9fc08108aa852f97693"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87466789bac22a086913f8ba89abeed4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_micro_bit_file_system.html#a87466789bac22a086913f8ba89abeed4">write</a> (int fd, uint8_t *buffer, int size)</td></tr>
<tr class="separator:a87466789bac22a086913f8ba89abeed4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6134fcda87c2ee9408a6730a317d6379"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_micro_bit_file_system.html#a6134fcda87c2ee9408a6730a317d6379">read</a> (int fd, uint8_t *buffer, int size)</td></tr>
<tr class="separator:a6134fcda87c2ee9408a6730a317d6379"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a711f7fcb99ee15f84517106d39b0b80f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_micro_bit_file_system.html#a711f7fcb99ee15f84517106d39b0b80f">remove</a> (char const *filename)</td></tr>
<tr class="separator:a711f7fcb99ee15f84517106d39b0b80f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04562220df7fc7daad3b08fdc42ef965"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_micro_bit_file_system.html#a04562220df7fc7daad3b08fdc42ef965">createDirectory</a> (char const *name)</td></tr>
<tr class="separator:a04562220df7fc7daad3b08fdc42ef965"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-attribs" name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:adff501fc6a9b70eba2ca21d650dbc727"><td class="memItemLeft" align="right" valign="top"><a id="adff501fc6a9b70eba2ca21d650dbc727" name="adff501fc6a9b70eba2ca21d650dbc727"></a>
static <a class="el" href="class_micro_bit_file_system.html">MicroBitFileSystem</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>defaultFileSystem</b> = NULL</td></tr>
<tr class="separator:adff501fc6a9b70eba2ca21d650dbc727"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Class definition for the MicroBit File system. </p>
<p >Microbit file system class. Presents a POSIX-like interface consisting of:</p><ul>
<li><a class="el" href="class_micro_bit_file_system.html#a89afb809c323b6fbdde58fe0b4cf8537">open()</a></li>
<li><a class="el" href="class_micro_bit_file_system.html#a85b7705bab1bbb267b4db0231ee30fc1">close()</a></li>
<li><a class="el" href="class_micro_bit_file_system.html#a6134fcda87c2ee9408a6730a317d6379">read()</a></li>
<li><a class="el" href="class_micro_bit_file_system.html#a87466789bac22a086913f8ba89abeed4">write()</a></li>
<li><a class="el" href="class_micro_bit_file_system.html#a04f5ee2e8fb6d9fc08108aa852f97693">seek()</a></li>
<li><a class="el" href="class_micro_bit_file_system.html#a711f7fcb99ee15f84517106d39b0b80f">remove()</a></li>
</ul>
<p >Only a single instance shoud exist at any given time. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a7f6a046c9bfc89fc40bfb420a3a64f0f" name="a7f6a046c9bfc89fc40bfb420a3a64f0f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f6a046c9bfc89fc40bfb420a3a64f0f">&#9670;&nbsp;</a></span>MicroBitFileSystem()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MicroBitFileSystem::MicroBitFileSystem </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>flashStart</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flashPages</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Constructor. Creates an instance of a <a class="el" href="class_micro_bit_file_system.html" title="Class definition for the MicroBit File system.">MicroBitFileSystem</a>. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a85b7705bab1bbb267b4db0231ee30fc1" name="a85b7705bab1bbb267b4db0231ee30fc1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a85b7705bab1bbb267b4db0231ee30fc1">&#9670;&nbsp;</a></span>close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MicroBitFileSystem::close </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Close the specified file handle. File handle resources are then made available for future <a class="el" href="class_micro_bit_file_system.html#a89afb809c323b6fbdde58fe0b4cf8537">open()</a> calls.</p>
<p ><a class="el" href="class_micro_bit_file_system.html#a85b7705bab1bbb267b4db0231ee30fc1">close()</a> must be called to ensure all pending data is written back to FLASH memory.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fd</td><td>file descriptor - obtained with <a class="el" href="class_micro_bit_file_system.html#a89afb809c323b6fbdde58fe0b4cf8537">open()</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>non-zero on success, MICROBIT_NOT_SUPPORTED if the file system has not been initialised, MICROBIT_INVALID_PARAMETER if the given file handle is invalid.</dd></dl>
<div class="fragment"><div class="line"><a class="code hl_class" href="class_micro_bit_file_system.html">MicroBitFileSystem</a> f();</div>
<div class="line"><span class="keywordtype">int</span> fd = f.open(<span class="stringliteral">&quot;test.txt&quot;</span>, MB_READ);</div>
<div class="line"><span class="keywordflow">if</span>(!f.close(fd))</div>
<div class="line">   print(<span class="stringliteral">&quot;error closing file.&quot;</span>);</div>
<div class="ttc" id="aclass_micro_bit_file_system_html"><div class="ttname"><a href="class_micro_bit_file_system.html">MicroBitFileSystem</a></div><div class="ttdoc">Class definition for the MicroBit File system.</div><div class="ttdef"><b>Definition:</b> MicroBitFileSystem.h:131</div></div>
</div><!-- fragment --><p >Close the specified file handle. File handle resources are then made available for future <a class="el" href="class_micro_bit_file_system.html#a89afb809c323b6fbdde58fe0b4cf8537">open()</a> calls.</p>
<p ><a class="el" href="class_micro_bit_file_system.html#a85b7705bab1bbb267b4db0231ee30fc1">close()</a> must be called at some point to ensure the filesize in the FT is synced with the cached value in the FD.</p>
<dl class="section warning"><dt>Warning</dt><dd>if <a class="el" href="class_micro_bit_file_system.html#a85b7705bab1bbb267b4db0231ee30fc1">close()</a> is not called, the FT may not be correct, leading to data loss.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fd</td><td>file descriptor - obtained with <a class="el" href="class_micro_bit_file_system.html#a89afb809c323b6fbdde58fe0b4cf8537">open()</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>MICROBIT_OK on success, MICROBIT_NOT_SUPPORTED if the file system has not been initialised, MICROBIT_INVALID_PARAMETER if the given file handle is invalid.</dd></dl>
<div class="fragment"><div class="line"><a class="code hl_class" href="class_micro_bit_file_system.html">MicroBitFileSystem</a> f();</div>
<div class="line"><span class="keywordtype">int</span> fd = f.open(<span class="stringliteral">&quot;test.txt&quot;</span>, MB_READ);</div>
<div class="line"><span class="keywordflow">if</span>(!f.close(fd))</div>
<div class="line">   print(<span class="stringliteral">&quot;error closing file.&quot;</span>);</div>
</div><!-- fragment --> 
</div>
</div>
<a id="a04562220df7fc7daad3b08fdc42ef965" name="a04562220df7fc7daad3b08fdc42ef965"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a04562220df7fc7daad3b08fdc42ef965">&#9670;&nbsp;</a></span>createDirectory()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MicroBitFileSystem::createDirectory </td>
          <td>(</td>
          <td class="paramtype">char const *&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Creates a new directory with the given name and location</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>The fully qualified name of the new directory. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>MICROBIT_OK on success, MICROBIT_INVALID_PARAMETER if the path is invalid, or MICROBT_NO_RESOURCES if the FileSystem is full. </dd></dl>

</div>
</div>
<a id="a730330ff013ea29087c30493f7969f24" name="a730330ff013ea29087c30493f7969f24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a730330ff013ea29087c30493f7969f24">&#9670;&nbsp;</a></span>flush()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MicroBitFileSystem::flush </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Writes back all state associated with the given file to FLASH memory, leaving the file open.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fd</td><td>file descriptor - obtained with <a class="el" href="class_micro_bit_file_system.html#a89afb809c323b6fbdde58fe0b4cf8537">open()</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>MICROBIT_OK on success, MICROBIT_NOT_SUPPORTED if the file system has not been initialised, MICROBIT_INVALID_PARAMETER if the given file handle is invalid.</dd></dl>
<div class="fragment"><div class="line"><a class="code hl_class" href="class_micro_bit_file_system.html">MicroBitFileSystem</a> f();</div>
<div class="line"><span class="keywordtype">int</span> fd = f.open(<span class="stringliteral">&quot;test.txt&quot;</span>, MB_READ);</div>
<div class="line"> </div>
<div class="line">...</div>
<div class="line"> </div>
<div class="line">f.flush(fd);</div>
</div><!-- fragment --> 
</div>
</div>
<a id="a89afb809c323b6fbdde58fe0b4cf8537" name="a89afb809c323b6fbdde58fe0b4cf8537"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a89afb809c323b6fbdde58fe0b4cf8537">&#9670;&nbsp;</a></span>open()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MicroBitFileSystem::open </td>
          <td>(</td>
          <td class="paramtype">char const *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Open a new file, and obtain a new file handle (int) to read/write/seek the file. The flags are:</p><ul>
<li>MB_READ : read from the file.</li>
<li>MB_WRITE : write to the file.</li>
<li>MB_CREAT : create a new file, if it doesn't already exist.</li>
</ul>
<p >If a file is opened that doesn't exist, and MB_CREAT isn't passed, an error is returned, otherwise the file is created.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>name of the file to open, must contain only printable characters. </td></tr>
    <tr><td class="paramname">flags</td><td>One or more of MB_READ, MB_WRITE or MB_CREAT. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>return the file handle,MICROBIT_NOT_SUPPORTED if the file system has not been initialised MICROBIT_INVALID_PARAMETER if the filename is too large, MICROBIT_NO_RESOURCES if the file system is full.</dd></dl>
<div class="fragment"><div class="line"><a class="code hl_class" href="class_micro_bit_file_system.html">MicroBitFileSystem</a> f();</div>
<div class="line"><span class="keywordtype">int</span> fd = f.open(<span class="stringliteral">&quot;test.txt&quot;</span>, MB_WRITE|MB_CREAT);</div>
<div class="line"><span class="keywordflow">if</span>(fd&lt;0)</div>
<div class="line">   print(<span class="stringliteral">&quot;file open error&quot;</span>);</div>
</div><!-- fragment --> 
</div>
</div>
<a id="a6134fcda87c2ee9408a6730a317d6379" name="a6134fcda87c2ee9408a6730a317d6379"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6134fcda87c2ee9408a6730a317d6379">&#9670;&nbsp;</a></span>read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MicroBitFileSystem::read </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Read data from the file.</p>
<p >Read len bytes from the current seek position in the file, into the buffer. On each invocation to read, the seek position of the file handle is incremented atomically, by the number of bytes returned.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fd</td><td>File handle, obtained with <a class="el" href="class_micro_bit_file_system.html#a89afb809c323b6fbdde58fe0b4cf8537">open()</a> </td></tr>
    <tr><td class="paramname">buffer</td><td>to store data </td></tr>
    <tr><td class="paramname">size</td><td>number of bytes to read </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>number of bytes read on success, MICROBIT_NOT_SUPPORTED if the file system is not initialised, or this file was not opened with the MB_READ flag set, MICROBIT_INVALID_PARAMETER if the given file handle is invalid.</dd></dl>
<div class="fragment"><div class="line"><a class="code hl_class" href="class_micro_bit_file_system.html">MicroBitFileSystem</a> f;</div>
<div class="line"><span class="keywordtype">int</span> fd = f.<a class="code hl_function" href="class_micro_bit_file_system.html#a89afb809c323b6fbdde58fe0b4cf8537">open</a>(<span class="stringliteral">&quot;read.txt&quot;</span>, MB_READ);</div>
<div class="line"><span class="keywordflow">if</span>(f.<a class="code hl_function" href="class_micro_bit_file_system.html#a6134fcda87c2ee9408a6730a317d6379">read</a>(fd, buffer, 100) != 100)</div>
<div class="line">   print(<span class="stringliteral">&quot;read error&quot;</span>);</div>
<div class="ttc" id="aclass_micro_bit_file_system_html_a6134fcda87c2ee9408a6730a317d6379"><div class="ttname"><a href="class_micro_bit_file_system.html#a6134fcda87c2ee9408a6730a317d6379">MicroBitFileSystem::read</a></div><div class="ttdeci">int read(int fd, uint8_t *buffer, int size)</div><div class="ttdef"><b>Definition:</b> MicroBitFileSystem.cpp:1060</div></div>
<div class="ttc" id="aclass_micro_bit_file_system_html_a89afb809c323b6fbdde58fe0b4cf8537"><div class="ttname"><a href="class_micro_bit_file_system.html#a89afb809c323b6fbdde58fe0b4cf8537">MicroBitFileSystem::open</a></div><div class="ttdeci">int open(char const *filename, uint32_t flags)</div><div class="ttdef"><b>Definition:</b> MicroBitFileSystem.cpp:800</div></div>
</div><!-- fragment --> 
</div>
</div>
<a id="a711f7fcb99ee15f84517106d39b0b80f" name="a711f7fcb99ee15f84517106d39b0b80f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a711f7fcb99ee15f84517106d39b0b80f">&#9670;&nbsp;</a></span>remove()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MicroBitFileSystem::remove </td>
          <td>(</td>
          <td class="paramtype">char const *&#160;</td>
          <td class="paramname"><em>filename</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Remove a file from the system, and free allocated assets (including assigned blocks which are returned for use by other files).</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000001">Todo:</a></b></dt><dd>the file must not already have an open file handle.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>name of the file to remove. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>MICROBIT_OK on success, MICROBIT_INVALID_PARAMETER if the given filename does not exist, MICROBIT_CANCELLED if something went wrong</dd></dl>
<div class="fragment"><div class="line"><a class="code hl_class" href="class_micro_bit_file_system.html">MicroBitFileSystem</a> f;</div>
<div class="line"><span class="keywordflow">if</span>(!f.<a class="code hl_function" href="class_micro_bit_file_system.html#a711f7fcb99ee15f84517106d39b0b80f">remove</a>(<span class="stringliteral">&quot;file.txt&quot;</span>))</div>
<div class="line">    printf(<span class="stringliteral">&quot;file could not be removed&quot;</span>);</div>
<div class="ttc" id="aclass_micro_bit_file_system_html_a711f7fcb99ee15f84517106d39b0b80f"><div class="ttname"><a href="class_micro_bit_file_system.html#a711f7fcb99ee15f84517106d39b0b80f">MicroBitFileSystem::remove</a></div><div class="ttdeci">int remove(char const *filename)</div><div class="ttdef"><b>Definition:</b> MicroBitFileSystem.cpp:1321</div></div>
</div><!-- fragment --><p >Remove a file from the system, and free allocated assets (including assigned blocks which are returned for use by other files).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>null-terminated name of the file to remove. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>MICROBIT_OK on success, MICROBIT_INVALID_PARAMETER if the given filename does not exist, MICROBIT_CANCELLED if something went wrong.</dd></dl>
<div class="fragment"><div class="line"><a class="code hl_class" href="class_micro_bit_file_system.html">MicroBitFileSystem</a> f;</div>
<div class="line"><span class="keywordflow">if</span>(!f.<a class="code hl_function" href="class_micro_bit_file_system.html#a711f7fcb99ee15f84517106d39b0b80f">remove</a>(<span class="stringliteral">&quot;file.txt&quot;</span>))</div>
<div class="line">    print(<span class="stringliteral">&quot;file could not be removed&quot;</span>)</div>
</div><!-- fragment --> 
</div>
</div>
<a id="a04f5ee2e8fb6d9fc08108aa852f97693" name="a04f5ee2e8fb6d9fc08108aa852f97693"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a04f5ee2e8fb6d9fc08108aa852f97693">&#9670;&nbsp;</a></span>seek()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MicroBitFileSystem::seek </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Move the current position of a file handle, to be used for subsequent read/write calls.</p>
<p >The offset modifier can be:</p><ul>
<li>MB_SEEK_SET set the absolute seek position.</li>
<li>MB_SEEK_CUR set the seek position based on the current offset.</li>
<li>MB_SEEK_END set the seek position from the end of the file. E.g. to seek to 2nd-to-last byte, use offset=-1.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fd</td><td>file handle, obtained with <a class="el" href="class_micro_bit_file_system.html#a89afb809c323b6fbdde58fe0b4cf8537">open()</a> </td></tr>
    <tr><td class="paramname">offset</td><td>new offset, can be positive/negative. </td></tr>
    <tr><td class="paramname">flags</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>new offset position on success, MICROBIT_NOT_SUPPORTED if the file system is not intiialised, MICROBIT_INVALID_PARAMETER if the flag given is invalid or the file handle is invalid.</dd></dl>
<div class="fragment"><div class="line"><a class="code hl_class" href="class_micro_bit_file_system.html">MicroBitFileSystem</a> f;</div>
<div class="line"><span class="keywordtype">int</span> fd = f.<a class="code hl_function" href="class_micro_bit_file_system.html#a89afb809c323b6fbdde58fe0b4cf8537">open</a>(<span class="stringliteral">&quot;test.txt&quot;</span>, MB_READ);</div>
<div class="line">f.<a class="code hl_function" href="class_micro_bit_file_system.html#a04f5ee2e8fb6d9fc08108aa852f97693">seek</a>(fd, -100, MB_SEEK_END); <span class="comment">//100 bytes before end of file.</span></div>
<div class="ttc" id="aclass_micro_bit_file_system_html_a04f5ee2e8fb6d9fc08108aa852f97693"><div class="ttname"><a href="class_micro_bit_file_system.html#a04f5ee2e8fb6d9fc08108aa852f97693">MicroBitFileSystem::seek</a></div><div class="ttdeci">int seek(int fd, int offset, uint8_t flags)</div><div class="ttdef"><b>Definition:</b> MicroBitFileSystem.cpp:1001</div></div>
</div><!-- fragment --> 
</div>
</div>
<a id="a87466789bac22a086913f8ba89abeed4" name="a87466789bac22a086913f8ba89abeed4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a87466789bac22a086913f8ba89abeed4">&#9670;&nbsp;</a></span>write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MicroBitFileSystem::write </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Write data to the file.</p>
<p >Write from buffer, length bytes to the current seek position. On each invocation to write, the seek position of the file handle is incremented atomically, by the number of bytes returned.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fd</td><td>File handle </td></tr>
    <tr><td class="paramname">buffer</td><td>the buffer from which to write data </td></tr>
    <tr><td class="paramname">size</td><td>number of bytes to write </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>number of bytes written on success, MICROBIT_NO_RESOURCES if data did not get written to flash or the file system has not been initialised, or this file was not opened with the MB_WRITE flag set, MICROBIT_INVALID_PARAMETER if the given file handle is invalid.</dd></dl>
<div class="fragment"><div class="line"><a class="code hl_class" href="class_micro_bit_file_system.html">MicroBitFileSystem</a> f();</div>
<div class="line"><span class="keywordtype">int</span> fd = f.open(<span class="stringliteral">&quot;test.txt&quot;</span>, MB_WRITE);</div>
<div class="line"><span class="keywordflow">if</span>(f.write(fd, <span class="stringliteral">&quot;hello!&quot;</span>, 7) != 7)</div>
<div class="line">   print(<span class="stringliteral">&quot;error writing&quot;</span>);</div>
</div><!-- fragment --><p >Write data to the file.</p>
<p >Write from buffer, len bytes to the current seek position. On each invocation to write, the seek position of the file handle is incremented atomically, by the number of bytes returned.</p>
<p >The cached filesize in the FD is updated on this call. Also, the FT file size is updated only if a new page(s) has been written too, to reduce the number of FT writes.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fd</td><td>File handle </td></tr>
    <tr><td class="paramname">buffer</td><td>the buffer from which to write data </td></tr>
    <tr><td class="paramname">len</td><td>number of bytes to write </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>number of bytes written on success, MICROBIT_NO_RESOURCES if data did not get written to flash or the file system has not been initialised, or this file was not opened with the MB_WRITE flag set, MICROBIT_INVALID_PARAMETER if the given file handle is invalid.</dd></dl>
<div class="fragment"><div class="line"><a class="code hl_class" href="class_micro_bit_file_system.html">MicroBitFileSystem</a> f();</div>
<div class="line"><span class="keywordtype">int</span> fd = f.open(<span class="stringliteral">&quot;test.txt&quot;</span>, MB_WRITE);</div>
<div class="line"><span class="keywordflow">if</span>(f.write(fd, <span class="stringliteral">&quot;hello!&quot;</span>, 7) != 7)</div>
<div class="line">   print(<span class="stringliteral">&quot;error writing&quot;</span>);</div>
</div><!-- fragment --> 
</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>New folder/codal-microbit-v2/inc/<a class="el" href="_micro_bit_file_system_8h_source.html">MicroBitFileSystem.h</a></li>
<li>New folder/codal-microbit-v2/source/MicroBitFileSystem.cpp</li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="class_micro_bit_file_system.html">MicroBitFileSystem</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3 </li>
  </ul>
</div>
</body>
</html>
